# specify a schema to validate the configuration and get auto-completion in your editor
# yaml-language-server: $schema=https://ocm.software/schemas/configuration-schema.yaml
components:
  - name: "{{ .COMPONENT_NAME }}"
    version: "{{ .OPENBAO_CHART_VERSION }}"
    provider:
      name: "{{ .PROVIDER }}"
    resources:
      # Helm chart in OCI registry
      - name: openbao-helm-chart-external-oci
        type: helmChart
        version: "{{ .OPENBAO_CHART_VERSION }}"
        relation: external
        access:
          type: ociArtifact
          imageReference: "ghcr.io/openbao/charts/openbao:{{ .OPENBAO_CHART_VERSION }}"

      # Helm chart as local tgz file
      - name: openbao-helm-chart-local-tgz
        type: helmChart
        input:
          type: helm
          path: "../openbao-{{ .OPENBAO_CHART_VERSION }}.tgz"

      # Helm chart as local folder
      - name: openbao-helm-chart-local-folder
        type: helmChart
        version: "{{ .OPENBAO_CHART_VERSION }}"
        input:
          type: dir
          path: ../charts/openbao

      # Image referenced in the Helm chart
      - name: openbao-image
        type: ociImage
        version: "{{ .OPENBAO_VERSION }}"
        access:
          type: ociArtifact
          imageReference: "ghcr.io/openbao/openbao:{{ .OPENBAO_VERSION }}"

      # UBI Image referenced in the Helm chart
      - name: openbao-ubi-image
        type: ociImage
        version: "{{ .OPENBAO_VERSION }}"
        access:
          type: ociArtifact
          imageReference: "ghcr.io/openbao/openbao-ubi:{{ .OPENBAO_VERSION }}"

      # HSM Image referenced in the Helm chart
      - name: openbao-hsm-ubi-image
        type: ociImage
        version: "{{ .OPENBAO_VERSION }}"
        access:
          type: ociArtifact
          imageReference: "ghcr.io/openbao/openbao-hsm-ubi:{{ .OPENBAO_VERSION }}"
